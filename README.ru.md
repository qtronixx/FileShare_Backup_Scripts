  # PS-MultiSync-Backup üöÄ

 —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –±–∞–∑–µ **PowerShell** –∏ **Robocopy**. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π IT-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
 

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ú–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫.
- **–ò–µ—Ä–∞—Ä—Ö–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–æ—Ç–æ–∫–∏, –∏—Å–∫–ª—é—á–µ–Ω–∏—è, —Ñ–ª–∞–≥–∏) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –∑–∞–¥–∞—á–∞–º, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏.
- **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:** –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã (–£—Å–ø–µ—Ö, –í–Ω–∏–º–∞–Ω–∏–µ, –û—à–∏–±–∫–∞) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ –∏ —Å–µ—Ä–≤–µ—Ä–∞.
- **–ì–ª—É–±–æ–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–∏ Robocopy –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö Win32 –æ—à–∏–±–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `0x00000005` ‚Äî –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω), –¥–∞–∂–µ –µ—Å–ª–∏ –æ–±—â–∏–π –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º.
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è:** –õ–æ–≥–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–∞–ø–∫–∞–º `–ì–æ–¥/–ú–µ—Å—è—Ü`, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –∑–∞–º—É—Å–æ—Ä–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
  - –°–∫—Ä–∏–ø—Ç –Ω–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Robocopy (`$LASTEXITCODE`), –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Å—É–º–º–æ–π –±–∏—Ç–æ–≤—ã—Ö —Ñ–ª–∞–≥–æ–≤.
  - –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Å–ø–∏—Å–∫–∏: `$NonCriticalExitCodes` –∏ `$CriticalErrorHexCodes` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–±–æ—è.
  - –ï—Å–ª–∏ –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –Ω–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö, –Ω–æ –≤ –ª–æ–≥–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è **–∑–∞–¥–∞–Ω–Ω—ã–µ HEX-–∫–æ–¥—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ Win32** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ), —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –¥–æ **"–í–ù–ò–ú–ê–ù–ò–ï"**.
 
## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –û–° Windows / Windows Server.
- PowerShell 5.1 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π).
- –ó–∞–ø—É—Å–∫ –ø–æ–¥ –¥–æ–º–µ–Ω–Ω–æ–π —Å–µ—Ä–≤–∏—Å–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é —Å –ø—Ä–∞–≤–∞–º–∏ —á—Ç–µ–Ω–∏—è –≤—Å–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —à–∞—Ä—ã.
- –í–∞–∂–Ω–æ: –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ñ–∞–π–ª –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8 with BOM –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–∏—Ä–∏–ª–ª–∏—Ü—ã.

# PS-MultiSync-Backup üöÄ

–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –∏ –±—ç–∫–∞–ø–æ–≤ –Ω–∞ –±–∞–∑–µ PowerShell + Robocopy.

## –ß—Ç–æ –Ω–æ–≤–æ–≥–æ
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `SendTelegram`, `ArchiveCompression`, `ArchiveKeepOriginal`, `LogLevel`.
- –ü–∞—Ä–∞–º–µ—Ç—Ä `-TaskName`: –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é). –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `-TaskName` –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ `Enabled = $false`.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–µ–∑ `-TaskName` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ —Å `Enabled = $true`.
- –õ–æ–≥–∏: –ø–∞–ø–∫–∏ –ª–æ–≥–æ–≤ –∑–∞–¥–∞—á ‚Äî `<LogDirectory>/<TaskName>_log/`; –≥–ª–∞–≤–Ω—ã–π –ª–æ–≥ ‚Äî `sync_share_YYYY-MM-dd_HH-mm.txt` –≤ –∫–æ—Ä–Ω–µ `LogDirectory`.
- –†–æ—Ç–∞—Ü–∏—è: —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ `LogDirectory/Archive/yyyy/MM/...` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∑–∞—Ç–µ–º –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è –≤ ZIP (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ).

## –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `SendTelegram` (bool) ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `$true`).
- `ArchiveCompression` (bool) ‚Äî —Å–∂–∏–º–∞—Ç—å –∞—Ä—Ö–∏–≤–Ω—ã–µ –º–µ—Å—è—á–Ω—ã–µ –ø–∞–ø–∫–∏ –≤ ZIP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `$true`).
- `ArchiveKeepOriginal` (bool) ‚Äî –Ω–µ —É–¥–∞–ª—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –ø–∞–ø–∫–∏ –ø–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `$false`).
- `LogLevel` (string) ‚Äî `Debug|Info|Warning|Error` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Info`).

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å `BOT_TOKEN` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ `config.psd1` –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `BOT_TOKEN = $env:SYNC_BOT_TOKEN` –∏ –∑–∞–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ
- –ó–∞–ø—É—Å–∫ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤: –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ —Å `Enabled = $true`. –û—Ç–∫–ª—é—á—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è.
- –ó–∞–ø—É—Å–∫ —Å `-TaskName "Name1,Name2"`: –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `Enabled`.
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–µ–Ω–∞ –∑–∞–¥–∞—á, —Å–∫—Ä–∏–ø—Ç:
  - –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–π —É–∫–∞–∑–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏; –∏–ª–∏
  - –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.

## –õ–æ–≥–∏
- –ì–ª–∞–≤–Ω—ã–π –ª–æ–≥: `<LogDirectory>/sync_share_YYYY-MM-dd_HH-mm.txt` ‚Äî —Å—Ç–∞—Ä—Ç/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –¥–µ–π—Å—Ç–≤–∏—è —Ä–æ—Ç–∞—Ü–∏–∏/–∞—Ä—Ö–∏–≤–∞—Ü–∏–∏, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram.
- –õ–æ–≥–∏ –∑–∞–¥–∞—á: `<LogDirectory>/<TaskName>_log/<LogName>_DD-MM-YYYY_HH-mm.txt`.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:
```powershell
cp config.psd1.example config.psd1
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.psd1`: —É–∫–∞–∂–∏—Ç–µ `BOT_TOKEN` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SYNC_BOT_TOKEN`), `CHAT_ID`, `LogDirectory` –∏ `Tasks`.

3. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞:
```powershell
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
.\sync_share.ps1

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ Enabled = $false)
.\sync_share.ps1 -TaskName "SQL,fileshare"
```
